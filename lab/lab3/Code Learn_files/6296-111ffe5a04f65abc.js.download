"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6296],{49302:function(t,e,n){var r=n(47568),u=n(26042),i=n(69396),o=n(70655),a=n(85893),s=n(67294),c=n(87536),l=n(95117),f=n(38623),g=n(8357),p=n(7258),h=n(47533),d=n(29433),b=n(82307),v=n(94618),_=n(90918),m=n(52823),x=n.n(m),y=(n(65666),n(15660)),N=n.n(y),Z=(n(26764),n(79016),n(39980),n(52503),n(80366),n(27046),n(4279),n(2731),n(24335),n(96486)),j=n(16762),w=n(49734),k=n(89534);e.Z=function(t){var e,n=t.detailedLink,m=t.title,y=t.contextId,B=t.contextType,C=t.isManager,I=t.fetchedCallback,S=(0,v.E)().profile,T=(0,d.$G)().t,U=(0,s.useState)(null),D=U[0],O=U[1],E=(0,s.useState)(null),z=E[0],L=E[1],P=(0,s.useState)(!1),A=P[0],R=P[1],G=(0,s.useRef)(!1),M=(0,s.useState)(!0),q=M[0],F=M[1],K=function(){var t=(0,r.Z)((function(){var t,e,n,r=arguments;return(0,o.__generator)(this,(function(u){switch(u.label){case 0:t=r.length>0&&void 0!==r[0]?r[0]:1,e=r.length>1?r[1]:void 0,u.label=1;case 1:return u.trys.push([1,3,4,5]),R(!0),[4,k.O.filter({contextId:e,contextType:B,pageSize:10,pageIndex:t,parentId:null})];case 2:return(n=u.sent()).data.data&&(null===I||void 0===I||I(n.data.data),L((function(e){var r=(0,Z.cloneDeep)(e)||[];return r[t-1]=n.data.data,r})),setTimeout((function(){N().highlightAll()}),100)),[3,5];case 3:return u.sent(),[3,5];case 4:return R(!1),F(!1),[7];case 5:return[2]}}))}));return function(){return t.apply(this,arguments)}}(),H=function(){var t=(0,r.Z)((function(t){var e,n;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:e=z.length,n=t,r.label=1;case 1:return n<=e?[4,K(n,y)]:[3,4];case 2:r.sent(),r.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}));return function(e){return t.apply(this,arguments)}}(),Q=function(){var t=(0,r.Z)((function(){var t,e;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return e=(null===z||void 0===z||null===(t=z[z.length-1])||void 0===t?void 0:t.currentPage)+1,[4,K(e,y)];case 1:return n.sent(),[2]}}))}));return function(){return t.apply(this,arguments)}}();(0,s.useEffect)((function(){K(1,y),J({message:"",contextId:y,contextType:B,userId:null===S||void 0===S?void 0:S.id,createOrUpdate:0})}),[y]);var V={message:"",contextId:y,contextType:B,userId:null===S||void 0===S?void 0:S.id,createOrUpdate:0},W=(0,c.cI)({mode:"onChange",defaultValues:V,shouldUnregister:!1,resolver:(0,h.X)(p.object().shape({}))}),X=W.control,$=W.handleSubmit,J=W.reset,Y=W.watch,tt=function(){if(!G.current){var t=(0,j.t)(Y("message"));(0,Z.isNil)(t)||""==t?w.gU.error("Comment must not be blank"):$(function(){var t=(0,r.Z)((function(t){var e;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:G.current=!0,e=(0,j.t)(t.message),r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,k.O.post((0,i.Z)((0,u.Z)({},t),{title:m,detailedLink:n,message:e}))];case 2:return r.sent(),J(V),H(1),[3,5];case 3:return r.sent(),[3,5];case 4:return G.current=!1,[7];case 5:return[2]}}))}));return function(e){return t.apply(this,arguments)}}())()}};return(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)(l.x,{className:"text-base font-semibold",children:(null===z||void 0===z||null===(e=z[0])||void 0===e?void 0:e.total)?"".concat(z[0].total," ").concat(T("comments")):T("Comment")}),S?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mt-5 grid gap-1 grid-cols-[54px_auto]",children:[(0,a.jsx)(b.Z,{levelNo:0,src:null===S||void 0===S?void 0:S.avatar,userId:null===S||void 0===S?void 0:S.id,size:"lg"}),(0,a.jsx)(c.Qr,{name:"message",control:X,render:function(t){var e=t.field;return(0,a.jsx)("div",{className:x().editor,children:(0,a.jsx)(_.M,{value:e.value,onEditorChange:function(t){G.current||e.onChange(t)},onKeyDown:function(t){if(13==t.keyCode){if(t.shiftKey)return;t.preventDefault(),t.stopPropagation(),tt()}},init:{indent:!1,branding:!1,menubar:!1,toolbar:!1,file_browser_callback:!1,quickbars_selection_toolbar:!1,quickbars_insert_toolbar:!1,statusbar:!1,convert_urls:!1,placeholder:T("Write your comment"),content_css:"/editor.css"},tinymceScriptSrc:"https://cdnjs.cloudflare.com/ajax/libs/tinymce/6.7.0/tinymce.min.js"})})}})]}),(0,a.jsx)(g.zx,{className:"ml-auto mt-4",size:"sm",onClick:tt,children:T("Post")})]}):null,(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsxs)("div",{className:"grid gap-2 grid-cols-[54px_auto] mb-4",children:[(0,a.jsx)("div",{}),(0,a.jsx)("div",{className:"border-b"})]}),q&&(0,a.jsx)(a.Fragment,{children:[1,2].map((function(t,e){return(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"grid gap-1 grid-cols-[54px_auto] mb-4",children:[(0,a.jsx)("div",{className:"relative w-[40px] h-[40px] mt-0",children:(0,a.jsx)(f.O,{height:44,width:44,radius:"xl"})}),(0,a.jsxs)("div",{className:"border-b pb-5 text-sm",children:[(0,a.jsx)("div",{className:"flex gap-x-2 w-full flex-wrap mb-3",children:(0,a.jsx)(f.O,{height:20,width:180})}),(0,a.jsx)(f.O,{height:60,width:e%2===0?330:240})]})]})},e)}))}),!q&&(null===z||void 0===z?void 0:z.map((function(t){var e;return null===t||void 0===t||null===(e=t.results)||void 0===e?void 0:e.map((function(e){return(0,a.jsx)(j.Z,{isManager:C,contextId:y,contextType:B,openReplyItemId:D,data:e,title:m,detailedLink:n,refetch:function(){return H(t.currentPage)},setOpenReply:O},e.id)}))}))),(null===z||void 0===z?void 0:z[0])&&z[0].pageCount>z.length?(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(g.zx,{disabled:A,variant:"default",onClick:Q,size:"sm",children:T("See more")})}):null]})]})}},91098:function(t,e,n){var r=n(47568),u=n(51438),i=n(70655),o=n(99158),a=n(97274),s=function t(){(0,u.Z)(this,t)};s.getTopicList=function(t){return o.be.get(a.N1+"/discussion/search",{params:t})},s.getTopicDetail=function(){var t=(0,r.Z)((function(t){return(0,i.__generator)(this,(function(e){return[2,o.be.get(a.N1+"/discussion/detail/".concat(t))]}))}));return function(e){return t.apply(this,arguments)}}(),s.editTopic=function(){var t=(0,r.Z)((function(t){return(0,i.__generator)(this,(function(e){return[2,o.be.put(a.N1+"/discussion/update",t)]}))}));return function(e){return t.apply(this,arguments)}}(),s.postTopic=function(){var t=(0,r.Z)((function(t){return(0,i.__generator)(this,(function(e){return[2,o.be.post(a.N1+"/discussion/create",t)]}))}));return function(e){return t.apply(this,arguments)}}(),s.hideTopic=function(){var t=(0,r.Z)((function(t){return(0,i.__generator)(this,(function(e){return[2,o.be.patch(a.N1+"/discussion/switch-visibility/".concat(t))]}))}));return function(e){return t.apply(this,arguments)}}(),s.checkCreateTopic=(0,r.Z)((function(){return(0,i.__generator)(this,(function(t){return[2,o.be.get(a.N1+"/discussion/check-create-topic")]}))})),s.getBlogList=function(){var t=(0,r.Z)((function(t){return(0,i.__generator)(this,(function(e){return[2,o.be.get(a.N1+"/blog/search",{params:t})]}))}));return function(e){return t.apply(this,arguments)}}(),s.getBlogDetail=function(){var t=(0,r.Z)((function(t){return(0,i.__generator)(this,(function(e){return[2,o.be.get(a.N1+"/blog/detail",{params:t})]}))}));return function(e){return t.apply(this,arguments)}}(),s.getTopBlogers=function(){var t=(0,r.Z)((function(t){return(0,i.__generator)(this,(function(e){return[2,o.be.get(a.N1+"/blog/get-top-blogger",{params:t})]}))}));return function(e){return t.apply(this,arguments)}}(),s.getOwnerInfor=function(){var t=(0,r.Z)((function(t){return(0,i.__generator)(this,(function(e){return[2,o.be.get(a.N1+"/blog/get-owner-info",{params:t})]}))}));return function(e){return t.apply(this,arguments)}}(),s.followUser=function(){var t=(0,r.Z)((function(t){return(0,i.__generator)(this,(function(e){return[2,o.be.post(a.N1+"/blog/follow-user",t)]}))}));return function(e){return t.apply(this,arguments)}}(),s.blogSearchBlogger=function(){var t=(0,r.Z)((function(t){return(0,i.__generator)(this,(function(e){return[2,o.be.get(a.N1+"/blog/search-blogger",{params:t})]}))}));return function(e){return t.apply(this,arguments)}}(),s.blogUpdateBloggerStatus=function(){var t=(0,r.Z)((function(t){return(0,i.__generator)(this,(function(e){return[2,o.be.put(a.N1+"/blog/update-blogger-status",t)]}))}));return function(e){return t.apply(this,arguments)}}(),s.blogDeleteBlogger=function(){var t=(0,r.Z)((function(t){return(0,i.__generator)(this,(function(e){return[2,o.be.delete(a.N1+"/blog/delete-blogger",{params:t})]}))}));return function(e){return t.apply(this,arguments)}}(),s.blogAddBlogger=function(){var t=(0,r.Z)((function(t){return(0,i.__generator)(this,(function(e){return[2,o.be.post(a.N1+"/blog/add-blogger",t)]}))}));return function(e){return t.apply(this,arguments)}}(),s.blogRegisterBlogger=function(){var t=(0,r.Z)((function(t){return(0,i.__generator)(this,(function(e){return[2,o.be.post(a.N1+"/blog/register-blogger",t)]}))}));return function(e){return t.apply(this,arguments)}}(),s.updateAuthor=function(){var t=(0,r.Z)((function(t){return(0,i.__generator)(this,(function(e){return[2,o.be.post(a.N1+"/blog/update-author",t)]}))}));return function(e){return t.apply(this,arguments)}}(),s.unOrPublishBlog=function(){var t=(0,r.Z)((function(t){return(0,i.__generator)(this,(function(e){return[2,o.be.patch(a.N1+"/blog/un-or-publish-blog",t)]}))}));return function(e){return t.apply(this,arguments)}}(),s.createBlog=function(){var t=(0,r.Z)((function(t){return(0,i.__generator)(this,(function(e){return[2,o.be.post(a.N1+"/blog/create",t)]}))}));return function(e){return t.apply(this,arguments)}}(),s.updateBlog=function(){var t=(0,r.Z)((function(t){return(0,i.__generator)(this,(function(e){return[2,o.be.put(a.N1+"/blog/update",t)]}))}));return function(e){return t.apply(this,arguments)}}(),s.blogCheckCreateBlog=(0,r.Z)((function(){return(0,i.__generator)(this,(function(t){return[2,o.be.get(a.N1+"/blog/check-create-blog")]}))})),s.getBlogById=function(){var t=(0,r.Z)((function(t){return(0,i.__generator)(this,(function(e){return[2,o.be.get(a.N1+"/blog/get-blog-by-id",{params:t})]}))}));return function(e){return t.apply(this,arguments)}}(),s.manageBlog=function(){var t=(0,r.Z)((function(t){return(0,i.__generator)(this,(function(e){return[2,o.be.get(a.N1+"/blog/manage-blog",{params:t})]}))}));return function(e){return t.apply(this,arguments)}}(),s.exportBlog=(0,r.Z)((function(){return(0,i.__generator)(this,(function(t){return[2,o.be.get(a.N1+"/blog/export")]}))})),s.synchronySocialNetwork=(0,r.Z)((function(){return(0,i.__generator)(this,(function(t){return[2,o.be.put(a.N1+"/blog/synchrony-social-network")]}))})),s.helpSearch=function(){var t=(0,r.Z)((function(t){return(0,i.__generator)(this,(function(e){return[2,o.be.get(a.N1+"/help/search",{params:t})]}))}));return function(e){return t.apply(this,arguments)}}(),s.helpDetail=function(){var t=(0,r.Z)((function(t){return(0,i.__generator)(this,(function(e){return[2,o.be.get(a.N1+"/help/detail/".concat(t))]}))}));return function(e){return t.apply(this,arguments)}}(),s.helpCreate=function(){var t=(0,r.Z)((function(t){return(0,i.__generator)(this,(function(e){return[2,o.be.post(a.N1+"/help/save",t)]}))}));return function(e){return t.apply(this,arguments)}}(),s.helpDelete=function(){var t=(0,r.Z)((function(t){return(0,i.__generator)(this,(function(e){return[2,o.be.delete(a.N1+"/help/delete/".concat(t))]}))}));return function(e){return t.apply(this,arguments)}}(),s.discussionGetUserDiscussionStatistic=function(){var t=(0,r.Z)((function(t){return(0,i.__generator)(this,(function(e){return[2,o.be.get(a.N1+"/discussion/get-user-discussion-statistic",{params:t})]}))}));return function(e){return t.apply(this,arguments)}}(),s.saveUserAchievement=function(){var t=(0,r.Z)((function(t){return(0,i.__generator)(this,(function(e){return[2,o.be.post(a.N1+"/user/save-user-achievement",t)]}))}));return function(e){return t.apply(this,arguments)}}(),s.saveUserExperience=function(){var t=(0,r.Z)((function(t){return(0,i.__generator)(this,(function(e){return[2,o.be.post(a.N1+"/user/save-user-experience",t)]}))}));return function(e){return t.apply(this,arguments)}}(),s.userDeleteUserExperience=function(){var t=(0,r.Z)((function(t){return(0,i.__generator)(this,(function(e){return[2,o.be.delete(a.N1+"/user/delete-user-experience/".concat(t))]}))}));return function(e){return t.apply(this,arguments)}}(),s.saveUserEducation=function(){var t=(0,r.Z)((function(t){return(0,i.__generator)(this,(function(e){return[2,o.be.post(a.N1+"/user/save-user-education",t)]}))}));return function(e){return t.apply(this,arguments)}}(),s.userDeleteUserEducation=function(){var t=(0,r.Z)((function(t){return(0,i.__generator)(this,(function(e){return[2,o.be.delete(a.N1+"/user/delete-user-education/".concat(t))]}))}));return function(e){return t.apply(this,arguments)}}(),s.blogGetHomeBlogs=function(){var t=(0,r.Z)((function(t){return(0,i.__generator)(this,(function(e){return[2,o.be.get(a.N1+"/blog/get-home-blogs",{params:t})]}))}));return function(e){return t.apply(this,arguments)}}(),e.Z=s}}]);