(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8180],{92716:function(e,t,r){"use strict";r.d(t,{d:function(){return q}});var n=r(67294),s=r(64761),i=r(68216);const[a,l]=(0,i.R)("Drawer component was not found in tree");var o=r(96768),c=r(56817),d=r(14258);const u={xs:(0,o.h)(320),sm:(0,o.h)(380),md:(0,o.h)(440),lg:(0,o.h)(620),xl:(0,o.h)(780)};var h=(0,c.k)(((e,{position:t},{size:r})=>({header:{zIndex:1e3},content:{flex:"right"===t||"left"===t?`0 0 ${(0,d.a)({size:r,sizes:u})}`:"0 0 100%",maxWidth:"100%",maxHeight:"100%",height:"right"===t||"left"===t?"100%":(0,d.a)({size:r,sizes:u}),borderRadius:0,overflowY:"auto"},inner:{display:"flex",justifyContent:"right"===t?"flex-end":"flex-start",alignItems:"bottom"===t?"flex-end":"flex-start"}}))),f=r(41490),m=Object.defineProperty,x=Object.defineProperties,p=Object.getOwnPropertyDescriptors,v=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable,b=(e,t,r)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,y=(e,t)=>{for(var r in t||(t={}))g.call(t,r)&&b(e,r,t[r]);if(v)for(var r of v(t))j.call(t,r)&&b(e,r,t[r]);return e},w=(e,t)=>x(e,p(t));const N={top:"slide-down",bottom:"slide-up",left:"slide-right",right:"slide-left"},_={top:"slide-down",bottom:"slide-up",right:"slide-right",left:"slide-left"},C=w(y({},f.K),{position:"left"});function E(e){const t=(0,s.N4)("DrawerRoot",C,e),{classNames:r,variant:i,size:l,scrollAreaComponent:o,position:c,transitionProps:d}=t,u=((e,t)=>{var r={};for(var n in e)g.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&v)for(var n of v(e))t.indexOf(n)<0&&j.call(e,n)&&(r[n]=e[n]);return r})(t,["classNames","variant","size","scrollAreaComponent","position","transitionProps"]),{classes:m,cx:x,theme:p}=h({position:c},{name:"Drawer",variant:i,size:l}),b=("rtl"===p.dir?_:N)[c];return n.createElement(a,{value:{scrollAreaComponent:o}},n.createElement(f.e,y({__staticSelector:"Drawer",size:l,variant:i,transitionProps:y({transition:b,duration:200},d),classNames:w(y({},r),{content:x(m.content,null==r?void 0:r.content),inner:x(m.inner,null==r?void 0:r.inner)})},u)))}var O=Object.defineProperty,I=Object.getOwnPropertySymbols,z=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable,Z=(e,t,r)=>t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const S={shadow:"xl"},k=(0,n.forwardRef)(((e,t)=>{const r=(0,s.N4)("ModalContent",S,e),{children:i,scrollAreaComponent:a}=r,o=((e,t)=>{var r={};for(var n in e)z.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&I)for(var n of I(e))t.indexOf(n)<0&&F.call(e,n)&&(r[n]=e[n]);return r})(r,["children","scrollAreaComponent"]),c=l(),d=a||c.scrollAreaComponent||f.e.NativeScrollArea;return n.createElement(f.e.Content,((e,t)=>{for(var r in t||(t={}))z.call(t,r)&&Z(e,r,t[r]);if(I)for(var r of I(t))F.call(t,r)&&Z(e,r,t[r]);return e})({ref:t,radius:0},o),n.createElement(d,{style:{height:"100vh"}},i))}));var R=Object.defineProperty,D=Object.defineProperties,A=Object.getOwnPropertyDescriptors,L=Object.getOwnPropertySymbols,B=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,T=(e,t,r)=>t in e?R(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,U=(e,t)=>{for(var r in t||(t={}))B.call(t,r)&&T(e,r,t[r]);if(L)for(var r of L(t))P.call(t,r)&&T(e,r,t[r]);return e};const H=(M=U({},f.K),D(M,A({withOverlay:!0,withCloseButton:!0})));var M;function q(e){const t=(0,s.N4)("Drawer",H,e),{title:r,withOverlay:i,overlayProps:a,withCloseButton:l,closeButtonProps:o,children:c}=t,d=((e,t)=>{var r={};for(var n in e)B.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&L)for(var n of L(e))t.indexOf(n)<0&&P.call(e,n)&&(r[n]=e[n]);return r})(t,["title","withOverlay","overlayProps","withCloseButton","closeButtonProps","children"]),u=!!r||l;return n.createElement(E,U({},d),i&&n.createElement(f.e.Overlay,U({},a)),n.createElement(k,null,u&&n.createElement(f.e.Header,null,r&&n.createElement(f.e.Title,null,r),l&&n.createElement(f.e.CloseButton,U({},o))),n.createElement(f.e.Body,null,c)))}q.Root=E,q.CloseButton=f.e.CloseButton,q.Overlay=f.e.Overlay,q.Content=k,q.Header=f.e.Header,q.Title=f.e.Title,q.Body=f.e.Body,q.NativeScrollArea=f.e.NativeScrollArea},80022:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/chat",function(){return r(40183)}])},82307:function(e,t,r){"use strict";r.d(t,{Z:function(){return d}});var n=r(85893),s=(r(67294),r(90512)),i=r(55444),a=r(96486),l=r.n(a),o=r(39954),c=r(97274),d=function(e){var t=e.className,r=e.userId,d=e.levelNo,u=e.src,h=e.size,f=void 0===h?"md":h,m=0;return"xs"===f?m=30:"sm"===f?m=36:"md"===f?m=40:"lg"===f?m=44:"xl"===f?m=52:(0,a.isNil)(f)||(m=f),r?(0,n.jsxs)(i.Z,{href:"/profile/".concat(r),style:{width:"".concat(m,"px"),height:"".concat(m,"px")},className:(0,s.Z)("relative inline-block flex-none",t),children:[d>0&&(0,n.jsx)("img",{className:(0,s.Z)("absolute z-20 left-1/2 top-[-14%]",{"top-[-10%]":f>80}),style:{transform:"translate(-50%,0)"},alt:"frame-avatar",src:"/images/avatar/User-".concat(l().padStart(d.toString(),2,"0"),".svg"),width:"auto",height:"145%"}),(0,n.jsx)(o.E,{className:"absolute z-10 left-1/2 top-[10%] rounded-full overflow-hidden aspect-square object-cover",style:{transform:"translate(-50%,0)"},src:u,width:"".concat(m,"px"),height:"".concat(m,"px"),withPlaceholder:!0,placeholder:(0,n.jsx)("img",{width:"".concat(m,"px"),height:"".concat(m,"px"),src:c.L4+"/Themes/TheCodeCampPro/Resources/Images/code-learn/user-default.svg"})})]}):(0,n.jsxs)("div",{style:{width:"".concat(m,"px"),height:"".concat(m,"px")},className:(0,s.Z)("relative inline-block flex-none",t),children:[d>0&&(0,n.jsx)("img",{className:(0,s.Z)("absolute z-20 left-1/2 top-[-13%]",{"top-[-10%]":f>80}),style:{transform:"translate(-50%,0)"},alt:"frame-avatar",src:"/images/avatar/User-".concat(l().padStart(d.toString(),2,"0"),".svg"),width:"auto",height:"145%"}),(0,n.jsx)(o.E,{className:"absolute z-10 left-1/2 top-[10%] rounded-full overflow-hidden aspect-square object-cover",style:{transform:"translate(-50%,0)"},src:u,width:"".concat(m,"px"),height:"".concat(m,"px"),withPlaceholder:!0,placeholder:(0,n.jsx)("img",{width:"".concat(m,"px"),height:"".concat(m,"px"),src:c.L4+"/Themes/TheCodeCampPro/Resources/Images/code-learn/user-default.svg"})})]})}},94618:function(e,t,r){"use strict";r.d(t,{E:function(){return i}});var n=r(9473),s=r(48929),i=function(){var e=(0,n.v9)(s.tM),t=(0,n.v9)(s.Rp);return{isProfileFetched:t,authorized:t&&!!e,profile:e}}},40183:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSG:function(){return ce},default:function(){return de}});var n=r(85893),s=r(42121),i=r(67294),a=r(1798),l=r.n(a),o=r(44104),c=r(29433),d=r(40114),u=r.n(d),h=r(34065),f=r(89486),m=r(97892),x=r(9473),p=r(92716),v=r(77063),g=r(47568),j=r(26042),b=r(70655),y=r(82307),w=r(55856),N=r(10753),_=r(84644),C=r(23880),E=r(49734),O=r(23769),I=r(90512),z=r(96906),F=r(33721),Z=r(48929),S=r(8357),k=r(55444),R=r(28564),D=r(88393),A=r(31716),L=function(e){var t,r,s,a,d,h,f,m,p,v=e.data,g=(null===v||void 0===v?void 0:v.notifyCount)>0,j=(0,c.$G)().t,b=(0,i.useState)(!1),C=b[0],E=b[1],O=(0,N.O)((function(){return E(!1)})),L=(0,F.r)().markSeenNotifyChat,P=(0,z.N)().clearHistories;(0,x.v9)(Z.tM);return(0,n.jsxs)("li",{className:(0,I.Z)("flex items-center relative p-2 pb-1 hover:bg-gray-200 rounded-lg cursor-pointer",u()["chat-room-root"]),children:[(0,n.jsxs)("div",{className:"".concat(u()["wrap-user-item"]),onClick:function(){l().publish(o.qz.OPEN_CHAT,{data:v}),setTimeout((function(){var e=document.getElementById("detail-chat-".concat(v.id));null!=e&&e.scrollTo(0,e.scrollHeight)}),200)},children:[(0,n.jsx)(y.Z,{levelNo:null===(t=v.friend)||void 0===t||null===(r=t.userExpLevel)||void 0===r?void 0:r.levelNo,src:null===(s=v.friend)||void 0===s?void 0:s.avatarUrl,userId:null===(a=v.friend)||void 0===a?void 0:a.userId,size:"lg"}),(0,n.jsx)("div",{className:u()["wrap-user-info"],children:(0,n.jsx)("div",{className:"flex flex-col pt-1",children:(0,n.jsx)(S.lG,{className:"m-0 text-md truncate font-normal",style:{fontWeight:g?"600":"400"},title:_.DL.escapeForTitleAttribute((null===(d=v.friend)||void 0===d?void 0:d.username)||(null===(h=v.friend)||void 0===h?void 0:h.fullName)),children:(null===(f=v.friend)||void 0===f?void 0:f.username)||(null===(m=v.friend)||void 0===m?void 0:m.fullName)})})})]}),(0,n.jsx)("span",{className:(0,I.Z)("sub-menu-btn",{"shadow-[0_2px_6px_rgba(0,_0,_0,_0.1)] bg-white":C}),onClick:function(){return E(!C)},children:(0,n.jsx)(w.Z,{name:"dots-menu"})}),g&&(0,n.jsx)("span",{className:(0,I.Z)(u()["has-notice"],"right-[20px] top-1/2")}),C&&(0,n.jsxs)("ul",{ref:O,className:"".concat(u()["sub-menu"]," absolute top-[52px] right-1 t-full rounded-lg bg-white z-10 p-1 text-sm"),children:[(0,n.jsx)(B,{children:(0,n.jsx)(k.Z,{href:"/profile/".concat(null===v||void 0===v||null===(p=v.friend)||void 0===p?void 0:p.id),className:"text-inherit",target:"_blank",children:(0,n.jsx)(D.u,{label:j("View profile"),children:(0,n.jsx)("div",{className:"flex items-center justify-center gap-3 font-bold p-1",children:(0,n.jsx)(R.Z,{size:20,className:"text-inherit"})})})})}),(0,n.jsx)(B,{onClick:function(){return function(e){P(e.id),L(e.id),E(!1)}(v)},children:(0,n.jsx)(D.u,{label:j("Delete chat"),children:(0,n.jsx)("div",{className:"flex items-center justify-center gap-3 text-[#E32E34] font-bold p-1",children:(0,n.jsx)(A.HG,{width:20,height:20})})})})]})]})},B=function(e){return(0,n.jsx)("li",(0,j.Z)({className:"chat-option hover:bg-[#EEEFFA] hover:text-[#2C31CF] text-[#3B3C54] transition-all cursor-pointer px-2 py-1 rounded"},e))},P=r(80061),T=r(95117),U=r(49834),H=r(67841),M=function(e){var t=e.isPresearch,r=(0,c.$G)().t;return(0,n.jsxs)("div",{className:"text-gray text-center pt-4 ",children:[(0,n.jsx)("span",{className:"text-gray-light",children:(0,n.jsx)(w.Z,{name:"search",size:56})}),(0,n.jsx)("p",{className:"text-md",children:t?r("Type the name of users you are searching for!"):r("No results found")+"!"})]})},q=r(88767),G=r(96486),W=r(4841),$=r(95210),X=function(e){var t,r=(0,c.$G)().t,s=(0,x.v9)(Z.tM),a=e.data,d=e.onOpenChatBox,u=e.refetch,h=a.status==o.k8.BeFriend,f=a.status==o.k8.Requested,m=f&&a.ownerId!==(null===s||void 0===s?void 0:s.id),p=(0,i.useState)(!1),v=p[0],j=p[1],w=(0,i.useRef)(null),N={id:a.userId>s.id?"".concat(s.id,"_").concat(a.userId):"".concat(a.userId,"_").concat(null===s||void 0===s?void 0:s.id),lastMessageTimestamp:new Date,friend:{id:a.userId,active:a.status===o.k8.BeFriend,username:a.userName,fullName:a.userName,avatarUrl:a.avatarUrl},active:a.status===o.k8.BeFriend,ownerId:-1,notifyCount:0},O=function(){var e=(0,g.Z)((function(){var e,t,n,s;return(0,b.__generator)(this,(function(i){switch(i.label){case 0:j(!0),i.label=1;case 1:return i.trys.push([1,6,7,8]),[4,C.a.acceptFriend({userId:a.userId})];case 2:return n=i.sent(),(null===(e=n.data)||void 0===e?void 0:e.success)?(l().publish(o.qz.RELOAD_FRIEND),l().publish(o.qz.ON_FRESH_DATA),[4,u()]):[3,4];case 3:return i.sent(),[3,5];case 4:(null===(t=n.data)||void 0===t?void 0:t.message)&&E.gU.error(r(null===(s=n.data)||void 0===s?void 0:s.message)),i.label=5;case 5:return[3,8];case 6:return i.sent(),[3,8];case 7:return j(!1),[7];case 8:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),z=function(){var e=(0,g.Z)((function(){var e,t,n,s;return(0,b.__generator)(this,(function(i){switch(i.label){case 0:j(!0),i.label=1;case 1:return i.trys.push([1,6,7,8]),[4,C.a.addFriend({userId:a.userId,requestMessage:""})];case 2:return n=i.sent(),(null===(e=n.data)||void 0===e?void 0:e.success)?(l().publish(o.qz.RELOAD_FRIEND_REQUEST),[4,u()]):[3,4];case 3:return i.sent(),[3,5];case 4:(null===(t=n.data)||void 0===t?void 0:t.message)&&E.gU.error(r(null===(s=n.data)||void 0===s?void 0:s.message)),i.label=5;case 5:return[3,8];case 6:return i.sent(),[3,8];case 7:return j(!1),[7];case 8:return[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,n.jsx)("li",{className:(0,I.Z)("flex items-center relative rounded-lg p-2 hover:bg-gray-200"),children:(0,n.jsxs)("div",{className:"flex items-center pt-1 pb-2 relative gap-3 w-full",children:[(0,n.jsx)(y.Z,{levelNo:null===(t=a.userExpLevel)||void 0===t?void 0:t.levelNo,src:a.avatarUrl,userId:a.userId,size:"md"}),(0,n.jsxs)("div",{className:"w-[calc(100%_-_68px)] flex items-center gap-4 justify-between",children:[(0,n.jsxs)("div",{className:"flex flex-col h-full",children:[(0,n.jsx)(k.Z,{className:"flex",href:"/profile/".concat(a.userId),children:(0,n.jsx)(T.x,{className:"m-0 text-sm truncate font-semibold",title:_.DL.escapeForTitleAttribute(a.displayName||a.userName),children:a.displayName||a.userName})}),(null===a||void 0===a?void 0:a.numOfCommonFriend)>0&&(0,n.jsx)("div",{children:(0,n.jsxs)("span",{className:"text-sm text-gray-primary",children:[a.numOfCommonFriend,"\xa0",r("mutual friend")]})})]}),h?(0,n.jsx)(U.A,{size:"lg",onClick:function(){d(N)},children:(0,n.jsx)($.Z,{color:"#65656D",width:24,height:24})}):(0,n.jsx)(n.Fragment,{children:m?(0,n.jsx)(H.z,{loading:v,onClick:function(){return O()},variant:"filled",className:"min-w-[100px] flex-none",size:"xs",ref:w,children:r("Accept")}):(0,n.jsx)(H.z,{onClick:function(){return z()},disabled:h||f,variant:"filled",loading:v,className:"min-w-[100px] flex-none",size:"xs",ref:w,children:r(f?"Invited":"Add friend")})})]})]})})},K=function(){var e=(0,c.$G)().t,t=(0,i.useState)(""),r=t[0],s=t[1],a=(0,i.useState)(!1),d=a[0],u=a[1],h=(0,i.useRef)(null),f=(0,i.useRef)(null),m=(0,i.useRef)(null),x=(0,W.Z)(r,300),p=(0,q.useQuery)(["search-user",x],(0,g.Z)((function(){var e,t,n;return(0,b.__generator)(this,(function(s){switch(s.label){case 0:return(t=(0,G.trim)(r)).length<2?[2,null]:[4,C.a.searchUser({filter:t})];case 1:return n=s.sent(),[2,null===(e=n.data)||void 0===e?void 0:e.data]}}))})),{keepPreviousData:!0,staleTime:1e3}),v=p.data,j=p.refetch;(0,i.useEffect)((function(){var e=function(e){h.current&&!h.current.contains(e.target)&&f.current&&!f.current.contains(e.target)&&m.current&&!m.current.contains(e.target)&&_()};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[h,f]);var y=d?"":"hidden",N=function(e){l().publish(o.qz.OPEN_CHAT,{data:e}),setTimeout((function(){var t=document.getElementById("detail-chat-".concat(e.id));null!=t&&t.scrollTo(0,t.scrollHeight)}),200)},_=function(){u(!1),s("")};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex gap-2 px-6",children:[d&&(0,n.jsx)("div",{onClick:_,className:"flex-none flex justify-center items-center cursor-pointer hover:bg-gray-200 rounded-full h-8 w-8",children:(0,n.jsx)(w.Z,{name:"arrow-left",size:20})}),(0,n.jsx)("div",{className:"w-full",ref:f,children:(0,n.jsx)(P.o,{value:r,onChange:function(e){return s(e.currentTarget.value)},onFocus:function(){return u(!0)},autoComplete:"off",placeholder:e("Search"),classNames:{root:"flex-grow",input:"bg-[#F0F1F5] rounded-md border border-[#CCC] h-10 text-base"},icon:d?null:(0,n.jsx)(w.Z,{name:"search",size:20,className:"text-gray"})})})]}),(0,n.jsxs)("div",{ref:h,className:"".concat(y," overflow-y-auto"),style:{maxHeight:"calc(100vh - 108px)",marginTop:"12px"},children:[(0,n.jsxs)("div",{style:{height:"calc(100vh - 120px)"},className:"h-full ".concat(0==r.length||r.length>0&&v&&0==v.length?"hidden":""),children:[(0,n.jsxs)("div",{className:"flex px-6 items-center flex-wrap text-md font-semibold pt-2",children:[(0,n.jsx)("span",{className:"pl-2 text-blue pr-2 flex items-center",children:(0,n.jsx)(w.Z,{name:"search",size:24})}),e('Search results for "{{name}}"',{name:r})]}),(0,n.jsx)("div",{className:"chat-contents py-2 overflow-hidden overflow-y-auto pt-0 h-full pb-2",style:{height:"calc(100% - 56px)"},children:(0,n.jsx)("div",{id:"list-friend",className:"content mb-3 pb-2 border-b-1 ".concat((null===v||void 0===v?void 0:v.length)>0?"":"hidden"),children:(0,n.jsx)("ul",{className:"mt-4 px-6 flex gap-1 flex-col none-list overflow-hidden overflow-y-auto pb-10",children:null===v||void 0===v?void 0:v.map((function(e){return(0,n.jsx)(X,{onOpenChatBox:N,data:e,refetch:j},e.userId)}))})})})]}),(0,n.jsx)("div",{ref:m,className:"".concat(0==r.length?"":"hidden"),style:{height:0==r.length?"calc(100vh - 108px)":""},children:(0,n.jsx)(M,{isPresearch:!0})}),(0,n.jsx)("div",{className:"".concat(r.length>0&&v&&0==v.length?"":"hidden"),style:{height:r.length>0&&v&&0==v.length?"calc(100vh - 108px)":""},children:(0,n.jsx)(M,{isPresearch:!1})})]})]})},V=r(78834),Y=r(28444),J=r(38623),Q=function(){var e,t,r,s=(0,c.$G)().t,a=(0,x.I0)(),d=(0,x.v9)(Y.Ze),u=(0,x.v9)(Y.Fl),h=function(){var e=(0,g.Z)((function(){var e,t;return(0,b.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,3,4]),[4,C.a.listFriend({pageIndex:1,pageSize:100,progress:!1})];case 1:return t=r.sent(),a((0,Y.Xj)(null===(e=t.data)||void 0===e?void 0:e.data)),[3,4];case 2:return r.sent(),a((0,Y.Xj)(null)),[3,4];case 3:return a((0,Y.No)(!1)),[7];case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){h();var e=l().subscribe(o.qz.RELOAD_FRIEND,(function(){h()}));return function(){l().unsubscribe(e)}}),[]);var f=function(e){l().publish(o.qz.OPEN_CHAT,{data:e}),setTimeout((function(){var t=document.getElementById("detail-chat-".concat(e.id));null!=t&&t.scrollTo(0,t.scrollHeight)}),200)},m=function(e){(0,O.gH)({message:s("Are you sure you want to unfriend {{name}}?",{name:null===e||void 0===e?void 0:e.userName}),onConfirm:(0,g.Z)((function(){var t,r,n,i,a;return(0,b.__generator)(this,(function(c){switch(c.label){case 0:return n=null===e||void 0===e?void 0:e.userId,[4,C.a.unFriend({userId:n})];case 1:return i=c.sent(),(null===(t=i.data)||void 0===t?void 0:t.success)?(E.gU.success(s("Unfriend successfully.")),l().publish(o.qz.RELOAD_FRIEND)):(null===(r=i.data)||void 0===r?void 0:r.message)&&E.gU.error(s(null===(a=i.data)||void 0===a?void 0:a.message)),[2]}}))}))})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex gap-4 justify-between items-center py-2 px-6 mb-2",children:[(0,n.jsx)(S.xv,{className:"text-[#65656D]",children:d?s("Maximum number of friends: {{count}}/{{total}}",{count:(null===d||void 0===d?void 0:d.rowCount)||0,total:null===d||void 0===d?void 0:d.maxSetting}):null}),(0,n.jsx)(k.Z,{className:"text-base hover:text-primary",href:"/friend",children:s("View all")})]}),(0,n.jsxs)("div",{className:"px-6",children:[u&&(0,n.jsx)("div",{className:"flex flex-col gap-3 pb-10",children:(0,n.jsx)(J.O,{height:60,radius:"md"})}),0===(null===d||void 0===d?void 0:d.rowCount)&&(null===d||void 0===d||null===(e=d.results)||void 0===e?void 0:e.length)>0?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"text-center py-6",children:[(0,n.jsx)(V.Z,{height:200,width:305}),(0,n.jsx)("p",{className:"text-[#65656D] mt-5 mb-0",children:s("You don't have any friends yet")})]}),(0,n.jsx)("div",{className:"font-bold mb-2",children:s("Suggestion to make friends")})]}):null,!u&&(0,n.jsx)(n.Fragment,{children:(null===d||void 0===d||null===(t=d.results)||void 0===t?void 0:t.length)<=0?(0,n.jsxs)("div",{className:"text-center py-6",children:[(0,n.jsx)(V.Z,{height:200,width:305}),(0,n.jsx)("p",{className:"text-[#65656D] mt-5 mb-0",children:s("You don't have any friends yet")})]}):(0,n.jsx)("div",{className:"flex flex-col gap-3 overflow-y-auto max-h-[calc(100vh_-_180px)] pb-20",children:null===d||void 0===d||null===(r=d.results)||void 0===r?void 0:r.map((function(e){return(0,n.jsx)(ee,{isUnknow:0===(null===d||void 0===d?void 0:d.rowCount),data:e,onUnfriend:m,onOpenChatBox:f},e.id)}))})})]})]})},ee=function(e){var t,r=(0,c.$G)().t,s=e.data,a=e.onOpenChatBox,d=e.onUnfriend,h=e.isUnknow,f=(0,x.v9)(Z.tM),m=(0,i.useState)(!1),p=m[0],v=m[1],j=(0,N.O)((function(){return v(!1)})),_=(0,i.useState)(!1),O=_[0],I=_[1],z={id:s.userId>f.id?"".concat(f.id,"_").concat(s.userId):"".concat(s.userId,"_").concat(f.id),lastMessageTimestamp:new Date,friend:{id:s.userId,username:s.userName,fullName:s.userName,avatarUrl:s.avatarUrl},ownerId:-1,notifyCount:0},F=function(){var e=(0,g.Z)((function(e){var t,n,s,i;return(0,b.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,3,4]),I(!0),[4,C.a.addFriend({userId:e,requestMessage:"",progress:!1})];case 1:return s=a.sent(),(null===(t=s.data)||void 0===t?void 0:t.success)?(l().publish(o.qz.RELOAD_FRIEND),E.gU.success(r("Send friend request successfully."))):(null===(n=s.data)||void 0===n?void 0:n.message)&&E.gU.error(r(null===(i=s.data)||void 0===i?void 0:i.message)),[3,4];case 2:return a.sent(),[3,4];case 3:return I(!1),[7];case 4:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=(0,g.Z)((function(e){var t,n,s,i;return(0,b.__generator)(this,(function(a){switch(a.label){case 0:I(!0),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,C.a.cancelFriend({userId:e,ownerId:f.id,progress:!1})];case 2:return s=a.sent(),(null===(t=s.data)||void 0===t?void 0:t.success)?(E.gU.success(r("Cancellation of friend request successfully!")),l().publish(o.qz.RELOAD_FRIEND)):(null===(n=s.data)||void 0===n?void 0:n.message)&&E.gU.error(r(null===(i=s.data)||void 0===i?void 0:i.message)),[3,5];case 3:return a.sent(),[3,5];case 4:return I(!1),[7];case 5:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=(0,g.Z)((function(e){var t,n,s,i;return(0,b.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,3,4]),I(!0),[4,C.a.acceptFriend({userId:e,progress:!1})];case 1:return s=a.sent(),(null===(t=s.data)||void 0===t?void 0:t.success)?(l().publish(o.qz.RELOAD_FRIEND),E.gU.success(r("Add friend successfully."))):(null===(n=s.data)||void 0===n?void 0:n.message)&&E.gU.error(r(null===(i=s.data)||void 0===i?void 0:i.message)),[3,4];case 2:return a.sent(),[3,4];case 3:return I(!1),[7];case 4:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();return(0,n.jsx)("div",{className:"relative",children:(0,n.jsxs)("div",{className:"flex gap-4 pl-2 pt-2",children:[(0,n.jsx)(y.Z,{levelNo:null===(t=s.userExpLevel)||void 0===t?void 0:t.levelNo,src:s.avatarUrl,userId:s.userId,size:"md"}),(0,n.jsxs)("div",{className:"max-w-full overflow-hidden flex flex-col",children:[(0,n.jsx)(k.Z,{className:"flex",href:"/profile/".concat(s.userId),children:(0,n.jsx)(S.lG,{className:"m-0 text-md truncate font-bold hover:text-primary",children:s.displayName||s.userName})}),(null===s||void 0===s?void 0:s.numOfCommonFriend)>0&&(0,n.jsx)("div",{children:(0,n.jsxs)("span",{className:"text-sm text-gray-primary",children:[s.numOfCommonFriend,"\xa0",r("mutual friend")]})})]}),h?(0,n.jsx)("div",{className:"ml-auto flex gap-2 pt-2 pr-2",children:function(e){switch(e){case o.k8.None:case o.k8.UnFriend:return(0,n.jsx)(S.zx,{onClick:function(){return F(s.userId)},variant:"filled",loading:O,className:"rounded-lg border border-[#ccc]",size:"sm",children:r("Add friend")});case o.k8.Requested:return s.ownerId===f.id?(0,n.jsx)(S.zx,{onClick:function(){return A(s.userId)},variant:"filled",loading:O,className:"rounded-lg bg-[#E5E6FD] hover:bg-[#E5E6FD] text-primary hover:opacity-80",size:"sm",children:r("Cancel request")}):(0,n.jsx)(S.zx,{loading:O,onClick:function(){return L(s.userId)},variant:"filled",size:"sm",className:"rounded-lg",children:r("Accept")})}}(s.status)}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"ml-auto flex gap-2 pt-3",children:(0,n.jsx)(U.A,{size:"lg",onClick:function(){a(z)},children:(0,n.jsx)($.Z,{color:"#65656D",width:24,height:24})})}),p&&(0,n.jsxs)("ul",{ref:j,className:"".concat(u()["sub-menu"]," absolute top-[52px] right-1 t-full rounded-lg bg-white z-10 p-1 text-sm"),children:[(0,n.jsx)(te,{children:(0,n.jsx)(k.Z,{href:"/profile/".concat(s.userId),className:"text-inherit",target:"_blank",children:(0,n.jsx)(D.u,{label:r("View profile"),children:(0,n.jsx)("div",{className:"flex items-center justify-center gap-3 font-bold p-1",children:(0,n.jsx)(R.Z,{size:20,className:"text-inherit"})})})})}),(0,n.jsx)(te,{onClick:function(){return d(s)},children:(0,n.jsx)(D.u,{label:r("Unfriend"),children:(0,n.jsx)("div",{className:"flex items-center justify-center text-[#E32E34] gap-3 font-bold p-1",children:(0,n.jsx)(w.Z,{name:"close",size:20})})})})]})]})]})},s.id)},te=function(e){return(0,n.jsx)("li",(0,j.Z)({className:"hover:bg-[#EEEFFA] hover:text-[#2C31CF] text-[#3B3C54] transition-all cursor-pointer px-2 py-1 rounded"},e))},re=r(69396),ne=function(e){var t=(0,c.$G)().t;return(0,n.jsxs)("svg",(0,re.Z)((0,j.Z)({width:"416",style:{maxWidth:"100%"},height:"auto",viewBox:"0 0 383 222",fill:"none",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e),{children:[(0,n.jsxs)("g",{filter:"url(#a1103)",children:[(0,n.jsx)("rect",{x:10,y:6,width:363,height:202,rx:5,fill:"url(#b1103)"}),(0,n.jsx)("rect",{x:10,y:6,width:363,height:202,rx:5,fill:"url(#c1103)",fillOpacity:.4}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15 6a5 5 0 0 0-5 5v-.5A4.5 4.5 0 0 1 14.5 6h.5Zm353 0a5 5 0 0 1 5 5v-.5a4.5 4.5 0 0 0-4.5-4.5h-.5Zm5 115c-94.322 15.924-148.714 6.37-196.639-2.048-49.884-8.763-92.759-16.294-166.361 7.421V203a5 5 0 0 0 5 5h353a5 5 0 0 0 5-5v-82Z",fill:"#fff"}),(0,n.jsx)("rect",{x:242.5,y:144.5,width:114,height:39,rx:5.5,fill:"#2D31C7"}),(0,n.jsx)("rect",{x:242.5,y:144.5,width:114,height:39,rx:5.5,stroke:"#CCC"}),(0,n.jsx)("text",{fill:"#fff",xmlSpace:"preserve",style:{whiteSpace:"pre"},fontFamily:"Muli",fontSize:16,fontWeight:"bold",letterSpacing:"0em",x:254.273,y:170.04,children:t("Support now")}),(0,n.jsx)("text",{fill:"#65656D",xmlSpace:"preserve",style:{whiteSpace:"pre"},fontFamily:"Muli",fontSize:14,fontStyle:"italic",letterSpacing:"0em",x:26,y:169.285,children:t("Enter your message here...")}),(0,n.jsx)("text",{fill:"#fff",xmlSpace:"preserve",style:{whiteSpace:"pre"},fontFamily:"Muli",fontSize:16,fontWeight:900,letterSpacing:"0em",x:26,y:48,children:t("Chat with CodeLearn")}),(0,n.jsx)("text",{fill:"#fff",xmlSpace:"preserve",style:{whiteSpace:"pre"},fontFamily:"Muli",fontSize:14,fontWeight:600,letterSpacing:"0em",x:26,y:70,children:t("Hi, if you have any questions")}),(0,n.jsx)("text",{fill:"#fff",xmlSpace:"preserve",style:{whiteSpace:"pre"},fontFamily:"Muli",fontSize:14,fontWeight:600,letterSpacing:"0em",x:26,y:90,children:t("feel free to message me.")})]}),(0,n.jsxs)("defs",{children:[(0,n.jsx)("pattern",{id:"b1103",patternContentUnits:"objectBoundingBox",width:1,height:1,children:(0,n.jsx)("use",{xlinkHref:"#e1103",transform:"matrix(.00089 0 0 .0016 0 -.115)"})}),(0,n.jsx)("pattern",{id:"c1103",patternContentUnits:"objectBoundingBox",width:1,height:1,children:(0,n.jsx)("use",{xlinkHref:"#f1103",transform:"matrix(.00066 0 0 .00119 0 -.001)"})}),(0,n.jsx)("image",{id:"e1103",width:1123,height:769,xlinkHref:"/images/chat/bg-support-chat.png"}),(0,n.jsxs)("filter",{id:"a1103",x:0,y:0,width:383,height:222,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,n.jsx)("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),(0,n.jsx)("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,n.jsx)("feOffset",{dy:4}),(0,n.jsx)("feGaussianBlur",{stdDeviation:5}),(0,n.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,n.jsx)("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,n.jsx)("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_236_8422"}),(0,n.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_236_8422",result:"shape"})]})]})]}))},se=r(97274),ie=r(94618),ae=function(){var e=(0,c.$G)().t,t=(0,x.I0)(),r=(0,h.a)("(min-width: 768px)"),a=(0,x.v9)(v.H$),d=(0,x.v9)(v.y6),g=(0,x.v9)(v.fl),j=(0,f.Z)(),b=(0,ie.E)().profile,y=(0,s.z)().refetch,w=(0,x.oR)(),N=function(e){e?j.postMessage(m.J["EDV.API.Chat.open"]):(j.postMessage(m.J["EDV.API.Chat.close"]),t((0,v.MN)(!1))),t((0,v.nV)(e))};(0,i.useEffect)((function(){var e=l().subscribe(o.qz.TOGGLE_CHAT_BOX,(function(){var e,t,r=null===(e=w.getState())||void 0===e||null===(t=e.chat)||void 0===t?void 0:t.showList;N(!r)}));return function(){N(!1),l().unsubscribe(e)}}),[w]);var _=function(e){e||y(),t((0,v.MN)(e))},C=function(e){l().publish(o.qz.OPEN_CHAT,{data:e}),setTimeout((function(){var t=document.getElementById("detail-chat-".concat(e.id));null!=t&&t.scrollTo(0,t.scrollHeight)}),200)};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(p.d,{lockScroll:!r,size:444,opened:!0,onClose:function(){return N(!1)},position:"right",classNames:{content:"rounded-md overflow-hidden shadow-none",title:"mr-0",body:"mr-0 p-0",overlay:"bg-transparent",header:"m-0 block relative p-0",close:"absolute top-4 right-4"},title:"",children:(0,n.jsxs)("div",{className:"bg-white w-full",children:[(0,n.jsxs)("div",{className:"flex items-center gap-6 px-6 mr-3 pb-2 pt-4",children:[(0,n.jsxs)("h3",{onClick:function(){return _(!1)},className:(0,I.Z)("hover:text-blue-primary cursor-pointer font-bold text-xl m-0 relative",{"text-blue-primary":!g}),children:[e("Message"),(0,n.jsx)("div",{className:(0,I.Z)(u().underline,{"!block":!g})})]}),(0,n.jsxs)("div",{onClick:function(){return _(!0)},className:(0,I.Z)("hover:text-blue-primary cursor-pointer font-bold text-xl relative",{"text-blue-primary":g}),children:[(0,n.jsx)("div",{className:(0,I.Z)(u().underline,{"!block":g})}),e("Friends")]})]}),(0,n.jsxs)("div",{className:u().wrapper,id:"chat-group",children:[(0,n.jsx)("div",{className:"pb-3",children:(0,n.jsx)(K,{})}),!g&&(0,n.jsxs)(n.Fragment,{children:[b.id!=se.XK&&(0,n.jsx)("div",{onClick:function(){var e=se.XK,t={id:e>b.id?"".concat(b.id,"_").concat(e):"".concat(e,"_").concat(b.id),lastMessageTimestamp:new Date,friend:{id:e,username:"support@codelearn.io",fullName:"support@codelearn.io",avatarUrl:"/avatar_admin.png"},ownerId:-1,notifyCount:0};C(t)},className:"px-3 flex justify-center cursor-pointer",children:(0,n.jsx)(ne,{})}),a&&(0,n.jsx)("div",{className:(0,I.Z)(u().roomList,{isAdmin:b.id==se.XK}),children:d&&d.length>0?(0,n.jsx)("ul",{className:"flex flex-col px-6 gap-1 none-list mb-10 pb-4",children:d.map((function(e){return(0,n.jsx)(L,{data:e},e.id)}))}):(0,n.jsxs)("div",{className:"text-[#65656D] text-center py-6",children:[(0,n.jsx)(V.Z,{height:200,width:305}),(0,n.jsx)("div",{className:"mt-5",children:e("You don't have any mailbox yet")}),(0,n.jsx)(k.Z,{href:"/friend",className:"text-[#65656D]",children:(0,n.jsxs)(c.cC,{i18nKey:"CONNECT_WITH_YOUR_FRIEND",t:e,children:["Connect with your friends ",(0,n.jsx)("span",{className:"text-[#2C31CF] underline",children:"here"})]})})]})})]}),g&&(0,n.jsx)("div",{className:u().body,children:(0,n.jsx)(Q,{})})]})]})})})},le=r(98074),oe=r(42018),ce=!0,de=function(){var e=(0,x.v9)(v.iQ);return(0,x.v9)(Z.rK)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(oe.Z,{}),(0,n.jsx)(ae,{}),e<768&&(0,n.jsx)(le.Lu,{isFullHeight:!0})]}):null}},40114:function(e){e.exports={wrapper:"ChatRoomList_wrapper__1O1Cp",body:"ChatRoomList_body__wuNfd",roomList:"ChatRoomList_roomList__3ibvL","user-item":"ChatRoomList_user-item__DZORW","wrap-user-info":"ChatRoomList_wrap-user-info__3yJNx","wrap-user-item":"ChatRoomList_wrap-user-item__WkkNT","chat-item":"ChatRoomList_chat-item__mJw4W","wrap-chat-item":"ChatRoomList_wrap-chat-item___PCB_","wrap-chat-info":"ChatRoomList_wrap-chat-info__cllL_","sub-menu":"ChatRoomList_sub-menu__VnHTa","chat-room-root":"ChatRoomList_chat-room-root__m5NQg","has-notice":"ChatRoomList_has-notice__gmHsR",underline:"ChatRoomList_underline__7Hl_n"}},28564:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(22581),s=r(67294),i=["size","color"];function a(e){var t=e.size,r=void 0===t?24:t,a=e.color,l=void 0===a?"currentColor":a,o=(0,n.Kd)(e,i);return s.createElement("svg",(0,n.gY)({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-info-circle",width:r,height:r,viewBox:"0 0 24 24",stroke:l,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},o),s.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),s.createElement("circle",{cx:"12",cy:"12",r:"9"}),s.createElement("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"}),s.createElement("polyline",{points:"11 12 12 12 12 16 13 16"}))}}},function(e){e.O(0,[3333,5287,9614,3991,5856,1566,4323,1716,263,6041,9774,2888,179],(function(){return t=80022,e(e.s=t);var t}));var t=e.O();_N_E=t}]);